<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Otto</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="navbar">
  <a href="ruleta.html" class="logo" style="background-image: url('elem/ruleta.png');" aria-label="Otto"></a>

  <a href="index.html" class="flecha">
    <img src="elem/volver-flecha.png" alt="Volver al inicio" />
  </a>
</div>
  <!-- Video fondo -->
  <video autoplay muted loop playsinline id="video-background">
    <source src="elem/otto.mp4" type="video/mp4">
    Tu navegador no soporta video HTML5.
  </video>

  <!-- Botón de sonido -->
  <button id="unmute-btn">🔊</button>

  <!-- Contenido -->
  <h1>CONTADOR PARA OTTO</h1>
  <div id="countdown">Cargando...</div>
  <div class="mensaje">Ottini contadorini</div>

  <!-- Script contador CORREGIDO -->
  <script>
    const video = document.getElementById('video-background');
    const unmuteBtn = document.getElementById('unmute-btn');
    const userAgent = navigator.userAgent;

    if (/iPhone|iPad|iPod/i.test(userAgent)) {
        video.style.objectFit = "cover";
    } else if (/Android/i.test(userAgent)) {
        video.style.objectFit = "cover";
    } else {
        video.style.objectFit = "fill";
    }

    unmuteBtn.addEventListener('click', () => {
        video.muted = false;
        video.play();
        unmuteBtn.style.display = 'none';
    });

    function getNextFridayMidnight() {
        const now = new Date();
        const target = new Date(now);
        
        // Calcular días hasta el próximo viernes
        // 0=domingo, 1=lunes, 2=martes, 3=miércoles, 4=jueves, 5=viernes, 6=sábado
        const currentDay = now.getDay();
        
        // Si hoy es viernes y ya pasó la medianoche
        if (currentDay === 5 && now.getHours() >= 0) {
            // Saltar al próximo viernes
            target.setDate(now.getDate() + 7);
        } else {
            // Calcular días restantes hasta el próximo viernes
            const daysUntilFriday = (5 - currentDay + 7) % 7;
            target.setDate(now.getDate() + daysUntilFriday);
        }
        
        target.setHours(0, 0, 0, 0); // Medianoche
        return target;
    }

    const countdownDisplay = document.getElementById('countdown');
    let targetDate = getNextFridayMidnight();

    function updateCountdown() {
        const now = new Date();
        const timeRemaining = targetDate.getTime() - now.getTime();

        // Si llegó a cero, actualizar para el próximo viernes
        if (timeRemaining <= 0) {
            targetDate = getNextFridayMidnight();
            updateCountdown();
            return;
        }

        const totalSeconds = Math.floor(timeRemaining / 1000);
        const hours = Math.floor(totalSeconds / 3600);
        const minutes = Math.floor((totalSeconds % 3600) / 60);
        const seconds = totalSeconds % 60;

        const formatTime = (num) => String(num).padStart(2, '0');
        countdownDisplay.textContent = `${formatTime(hours)}:${formatTime(minutes)}:${formatTime(seconds)}`;
    }

    updateCountdown();
    const countdownInterval = setInterval(updateCountdown, 1000);
  </script>
</body>
</html>
<a href="ruleta.html" class="boton-circular ruleta-izq" title="Ir a la ruleta">
  <img src="elem/ruleta.png" alt="Ruleta" class="icono-ruleta">
</a>